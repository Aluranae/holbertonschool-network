#!/usr/bin/env bash
# This script overrides local resolution of localhost and facebook.com using /etc/hosts

# Vérifier que le script est exécuté en tant que root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

# Sauvegarde de sécurité
cp /etc/hosts /etc/hosts.bak

# Supprimer les lignes contenant localhost avec 127.0.0.1
sed -i '/127.0.0.1.*localhost/d' /etc/hosts

# Supprimer les lignes contenant facebook.com
sed -i '/facebook\.com/d' /etc/hosts

# Ajouter les nouvelles redirections à la fin
echo "127.0.0.2 localhost" | tee -a /etc/hosts > /dev/null
echo "8.8.8.8 facebook.com" | tee -a /etc/hosts > /dev/null
