#!/usr/bin/env bash
# This script overrides local resolution of localhost and facebook.com using /etc/hosts

# Vérifier que le script est exécuté en tant que root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

# Sauvegarder le fichier original
cp /etc/hosts /etc/hosts.bak

# Supprimer toute ligne existante contenant 'localhost' ou 'facebook.com'
# Cela évite les doublons
sed -i '/localhost/d' /etc/hosts
sed -i '/facebook\.com/d' /etc/hosts

# Ajouter les nouvelles redirections demandées
echo "127.0.0.2 localhost" >> /etc/hosts
echo "8.8.8.8 facebook.com" >> /etc/hosts
